{"componentChunkName":"component---src-templates-post-tsx","path":"/aws-retrieve-admin-password-from-windows-ami/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"AWS: EC2 Password Retrieval of Windows AMI instance","path":"/aws-retrieve-admin-password-from-windows-ami","date":"November 05, 2015","dateIso":"2015-11-05T18:48:00.000Z","tags":["aws"],"references":["http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/troubleshooting-windows-instances.html#password-not-available|Troubleshooting Windows Instance Passwords","http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html|AWS Documentation on AMIs","http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/UsingConfig_WinAMI.html|Configuring a Windows Instance Using the EC2Config Service"],"description":"Enabling administrator password retrieval of an EC2 instance created from a custom Windows AMI"},"html":"<p>When working with AWS EC2, it's always good practice to create an AMI of your instance\nwhether it is for DR purposes or for a reference point to spin up new instances using\nCloudFormation. By default, when you launch an instance from your custom Windows AMI,\nyou will see the following message when trying to retrieve the administrator password\nin the AWS console:</p>\n<blockquote>\n<p>Password is not available.</p>\n<p>The instance was launched from a custom AMI, or the default password has changed. A\npassword cannot be retrieved for this instance. If you have forgotten your password,\nyou can reset it using the Amazon EC2 configuration service. For more information, see\n<a href=\"https://docs.aws.amazon.com/console/ec2/instances/connect/windows-password\">Passwords for a Windows Server instance</a>.</p>\n</blockquote>\n<p>If you no longer have the administrator password for the instance from the original instance, then you have to follow this <a href=\"http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-windows-passwords.html#ResettingAdminPassword\">long process</a>.</p>\n<p>To avoid having to run through this process, you can create your AMI so that it generates\na new random password each time an instance is created and also enable the password to be\nretrieved from the EC2 console. To do this, configure the EC2Config service as follows:</p>\n<ol>\n<li>Remote desktop to your Windows instance and open the EC2Config Service.</li>\n<li>Click the <em>Image</em> tab and then under <em>Administrator Password</em> click <em>Random</em>.</li>\n<li>Click <em>Shutdown with Sysprep</em> and wait for the instance to become <em>Stopped</em>.</li>\n<li>Once the instance is stopped, create your AMI as normal.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 489px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/490b90ed04877a4cb2c3e6c538384ef9/03e1f/EC2ConfigService-RandomPassword.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 121.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEEUlEQVR42n1USY/jRBTOn0UMB4RgRnPhAFw4wL9AYuDSI4QGep3e03bibieOs3m3y1XlvRI73uLYLuSEoQXS8PTpqfSkT99bq/cDc/f1CH01Iq9GwatR+FogL3nv86vlZ+fip6fiizPxkz+eXpxNv+Tcl3zwxb3x4kp+/dvDm2+++/Hb73tneiDKqqCBuYVmhj2cSiNJH0ylmQmtgJh+ZHqR4UWmT0yfgHAt2fjn349Ph6OfHsY9FkZQU5dLKV6v49UaAttzPQhsEpEiz/Ms+w/SNA38oFyTE27SGzhxHAaz+SIMie8HURS5rh+GkecHQRB6rucHEULY8wPX86uqopTWTUspPR0tekNnnUSRaQFN0w3DUFUVAKDrhmlalmUihCBEhmFAiAAACCHX9fKypJSe8PMe5yU+hLKikYhghB3XtW0bWABYAEHse76DHYwxQgjYdhRFVVXt6vqDMl6n6xWEKAoJiSJCSF039H/tOW0WrQIMBWEym82FsTCbLWRZVhTVMAxFUXVNU1VdVVVZ6sJFUdR1vd1X3pEZSKosBTYElgVthBA2dAMAGwDbMi3TMBHCcZxsNps0TcuyrKqqKEvaNmd7ZVKmiSTLhmGapgkAAFbHRBA7jgttW9cNjLGqqBDiqqqyLEs2G1rvzsbLTpnSZjweDxj26vLy9ubm/u6eYdj729uLi/f3d/cXZ+fX19f9fv/k+OTy/XuWHSiKkhByIUi9BzuklHIc98ubX4+PT/589+7t0du3R0dDjnvkOEGYKJI0mUym0+lwOBQnYle7LLfV7vxv5baudrtdtauqaltuy6Ioi7JpPtrzpm2fG0ZpO5/Pb29vHh+fWIZ5enrq9/vCWNhut23bzqbi1eUlw7ADlr27u2UYNk6SjszPD8pNEIQQQtfzMMau60Ib+r5f13XTNEEQIAgdx3Ed19lbud3+M2dC60pVVdtGmqbpmq4oqqbplmktl5KiqEmyoZRWVaVpGs+PHMd53rA9eaeqHVFaypYF0k0aRWS9t3ST1nVXY9O0aZqtV+s8L583bIDXeRw7rhd8OCNCVpTSfVNo27Z13RzwIUKrqlPulmSAVrsiw46DUXcGh5pJROI4DsOw3B/QR7s9dOKV5yLkpFmabDZlWRZ5kWVZ3v0Endtuu+HleV4WRZJsttvtPus9mfMSF1gPDwzP8xzHMQ/sgB0+PvLiZHJ4LObziTAZjwRFUVzHjZNkzz3MGa2yODYsGyIHIRdhFyIHQASx67hemuVNS7sLbtpDtm1Ld3vpE37RG6Jol8Z5mhbp5oB878ss9R1HWS4NVcU2kBbzuShaug4MYyqKAQTn/Kx3bhEQrGSPqP6/oPkr0UKDhcKr5tRCw6XaFxcTEwo6uHwSFgAdcbO/AJgB/+U6xFYIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Configuring EC2Config service for random generated passwords\"\n        title=\"\"\n        src=\"/static/490b90ed04877a4cb2c3e6c538384ef9/03e1f/EC2ConfigService-RandomPassword.png\"\n        srcset=\"/static/490b90ed04877a4cb2c3e6c538384ef9/8514f/EC2ConfigService-RandomPassword.png 192w,\n/static/490b90ed04877a4cb2c3e6c538384ef9/804b2/EC2ConfigService-RandomPassword.png 384w,\n/static/490b90ed04877a4cb2c3e6c538384ef9/03e1f/EC2ConfigService-RandomPassword.png 489w\"\n        sizes=\"(max-width: 489px) 100vw, 489px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The next time you create an EC2 instance from this AMI, you will be able to retrieve\nthe Administrator password from the console as normal rather than getting the error\nmessage above.</p>","timeToRead":1}},"pageContext":{"id":"adf6fcf8-77b6-53c6-939c-df23f06940cb"}},"staticQueryHashes":["1942088059"],"slicesMap":{}}