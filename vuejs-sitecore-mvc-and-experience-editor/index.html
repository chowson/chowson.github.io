<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Vue.js, Sitecore MVC and the Experience Editor | chowson.github.io</title><meta name="gridsome:hash" content="23c5a0808afcefbf6c87f6b9ce8de4ac23bfba70"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#2F855A"><meta data-vue-tag="ssr" name="description" content="Vue.js, Sitecore MVC and the Experience Editor"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="preconnect" href="https://fonts.googleapis.com" crossorigin=""><link data-vue-tag="ssr" rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link data-vue-tag="ssr" rel="preconnect" href="https://www.google-analytics.com" crossorigin=""><link data-vue-tag="ssr" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&amp;display=swap"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&amp;display=swap" media="print" onload="this.media=&#x27;all&#x27;"><link rel="preload" href="/assets/css/0.styles.9e59306c.css" as="style"><link rel="preload" href="/assets/js/app.3b38bf93.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.f80259c2.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.e3848afa.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.d9a740a4.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.792ae464.js"><link rel="prefetch" href="/assets/js/page--src--pages--tag-vue.d3c9994d.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.3325a57d.js"><link rel="stylesheet" href="/assets/css/0.styles.9e59306c.css"><script data-vue-tag="ssr" type="application/ld+json">{"@context":"https://schema.org/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://chowson.github.io/vuejs-sitecore-mvc-and-experience-editor/"},"headline":"headling","author":{"@type":"Person","name":"Chris Howson","sameAs":"https://github.io/chowson"},"publisher":{"@type":"Organization","name":"chowson.github.io","logo":{"@type":"ImageObject","url":"https://chowson.github.io/images/logo.png"}},"image":"https://chowson.github.io/images/logo.png","dateCreated":"2019-08-18","datePublished":"2019-08-18","dateModified":"2019-08-18","description":"Vue.js, Sitecore MVC and the Experience Editor"}</script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script type="text/javascript">
        (function() {
            function setTheme(newTheme) {
                window.__theme = newTheme;
                document.body.setAttribute('data-theme', newTheme);
                if(newTheme === 'theme-dark') { document.body.classList.add('dark'); }
                else { document.body.classList.remove('dark'); }
            }

            var preferredTheme;
            try {
                preferredTheme = localStorage.getItem('theme');
            } catch (err) { }

            window.__setPreferredTheme = function(newTheme) {
                setTheme(newTheme);
                try {
                localStorage.setItem('theme', newTheme);
                } catch (err) {}
            }

            var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

            darkQuery.addListener(function(e) {
                window.__setPreferredTheme(e.matches ? 'theme-dark' : 'theme-light');
            });

            setTheme(preferredTheme || (darkQuery.matches ? 'theme-dark' : 'theme-light'));
        })();
    </script>
    <div data-server-rendered="true" id="app" class="content-wrapper bg-background-primary font-sans text-copy-primary leading-normal flex flex-col min-h-screen"><header class="border-t-14 border-brand-900"><nav class="container mx-auto flex flex-wrap justify-between items-center py-8"><div><a href="/" class="logo flex items-center active"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-terminal"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg><span class="font-bold m-2">chowson.github.io</span></a></div><div class="flex md:hidden"><a href="#" aria-label="Switch theme" class="text-copy-primary hover:text-gray-600 mr-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a><div class="block"><button name="Open menu" class="flex items-center px-3 py-2 border rounded border-gray-500 hover:text-gray-600 hover:border-gray-600"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="current-color h-3 w-3"><title>Open Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" fill="gray"></path></svg></button></div></div><ul class="uppercase tracking-wide font-bold w-full block flex-grow md:space-x-8 space-y-6 md:space-y-0 md:flex md:flex-initial md:w-auto items-center mt-8 md:mt-0 hidden"><li class="mb-6 md:mb-0"><div class="relative" data-v-023972e7><div data-v-51a16351 data-v-023972e7></div><div class="relative w-80" data-v-023972e7><input type="text" placeholder="Search (Press  "/" to focus)" value="" class="bg-background-form border border-gray-500 rounded-full px-4 pl-10 py-2 outline-none focus:border-brand-500 w-80" data-v-023972e7><div class="absolute top-0 ml-3" style="top:10px" data-v-023972e7><svg fill="currentColor" viewBox="0 0 24 24" width="24" height="24" class="text-gray-500 h-5 w-5" data-v-023972e7><path d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" class="heroicon-ui" data-v-023972e7></path></svg></div><!----></div><!----></div></li><li class="hidden md:block"><a href="#" aria-label="Switch theme" class="text-copy-primary hover:text-gray-600 mr-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a></li></ul></nav></header><div class="flex-grow"><div class="container-inner mx-auto my-8"><article><h1 class="text-4xl font-bold leading-tight">Vue.js, Sitecore MVC and the Experience Editor</h1><div class="text-xl text-gray-700 dark:text-gray-500">September 18, 2019</div><div class="text-sm text-gray-700 dark:text-gray-500 mb-4">2 min read</div><div class="flex mb-8 text-sm"><a href="/tag/sitecore/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 text-brand-900 hover:bg-brand-300">
          sitecore
        </a></div><div class="markdown-body mb-8"><p>There is a compatibility issue between Vue.js and Sitecore MVC experience editor with
Sitecore 9.1. This issue is with a standard Sitecore MVC solution rather than Sitecore JSS.</p>
<h2 id="the-problem"><a href="#the-problem" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>The Problem</h2>
<p>The problem occurs when adding a new component in experience editor. The problem
manifests itself by appearing to ignore placeholder settings and show you the treeview
for selecting a rendering:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 711 476' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-2669f971b39d414e8d320aad60624cab'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-2669f971b39d414e8d320aad60624cab)' width='711' height='476' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAE60lEQVRo3u1ZW09jVRg9P8DEGH8AEO53CPeLwVdDeIFAwjXcyZAivvCAkUB4GhMTdRJfRhN9GUd90KgzTmLGOKAYgw73OxQoUEoppS23dkrL8qxNdqeWSnQGDGXOTla/vb/z7e/stfa3Tx%2b2kpCQgPj4eNBKcJyYmIi4uLi/PQuMIxgn7VWEXBvXHhsb61u37CtJSUlIT09HSkoKkpOTRXBaWpogn5WVhdTUVBHIZ4xhPC197F8k%2bcsSkuTJpaioyMcjLy9PWIUB7e3t6OvrQ09PD3Q6HaqqqlBbW4vOzk7hb2trQ1dXF/r7%2b4Xt6OhAd3c3CgoKRHIK8TwLlPMvU4CSkhLU1dUJIXJzc9Hb24ucnJxTAbKzs4UiBEllZmaKPneflpPy8/NRWFgoJjO%2brKxMVE5kZCRiYmJ8JUZwTDLyCNHSR0vIOIno6GjfsbsMEZiTnLh%2bWQEkT34KfyorK9HS0oKKigrRJ6gYq6C1tRXV1dWiKoimpiZBnrHl5eXiGWPkmJa%2b4uJiUU3MUVNTI6qG8/m8tLTUl6uhoUHEUFgulgu8DMhKYLXJo0urhIWFiQHPvfzwyQAqRYHo5wIzMjJEn34qKr8HjOE8mZQv5K6yLz%2bczO//IZWlz1jOj4qKAtcSHh5%2baYiIiDjTV7jzjY2NYidouSu00if99fX1vr4c%2b8cEzvMf%2b%2bcPhJzf3NwsqvD/hoIXvClerxcSbKf2BCcnZ%2bEf6w8%2bczqd2N7eFjk8Hs8/xl41KFy8JO5yuVTuJzhwuvHE7Ybn%2bBjHKkhIkgomDNvh4SFWVlZ8uYLFXUX4BLA79rCin8ekYR%2bf/mSA2WTEwsIiFhcXsbS0BIPBgNnZWbhVYdjkPGmPjo5EjL8vJI5A4ILdx151t71Bg/3JBwrACpACyOMUEgJIAo69PWwY9Hi8aMP738zDZrUIQqwAk8kEo9GIzc1NH7lrJwB313V0gCXjPn6dtMDjdsHhcGB3dxdWqxV7qkD7%2b/tniIe8AM9yZv3jr00F%2bP7qxN/d%2bV/Oa1cBz9M0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAFeYAFWV1dDT4CLuF5i490g7w6kACFzNYYQb15Vf8/JU%2bvf/1cVwDs9f7CUA33n%2bc/Ds8z5L3CqgOeJytgdFMculxrnFNV5Zq7z1K/w5sdmswnI2x/eCLEvrfTLfjBfsFhpmZvvuUjInO8NzODG92PQqWj7dhQ3vhtFx/1x6O6N4c9lI%2bw7FpjN29jZ2RE3XJzDvtlshsVigcJEvNfn%2bZ2ZmfHdBNMuLCwILC8vC8t7Ql6B6/V6zM3NiTHBj9/a2prwE/Pz8wKM4ZjvsNvtFwabzY49hx1bO1a89vEjvPruA%2bR%2b8gte/%2bw3ZN0eRNSHD/HKzR/w%2bR8L2Nsxw2gyCW683Z6amhLcyHlra%2bupAByMj4%2bLAArAxZM4CY%2bNjWF6elr4CJJjwpGREUxMTAgfRWBiCsIcxOTkpIij4qcLt12QADa14lQBLFYU3LqHl9%2b5i7xb9/HG7R9R9NEDxNz8Gi%2b9fQd3flffvbkBvcpjeHgYQ0NDGBwcFHy43o2NDSgyKUv44OBAQJavhPQH80m//5zAZxdJPjDXBw8fQ/fFI7z55QDa7/4s%2bm99NSAwuryB7S2T2Mj19XUBkma1cmN5DP4CpNRIS3um2dwAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="711" height="476" alt="Select a rendering" data-srcset="/assets/static/select-a-rendering.76c78fd.2262b6974abf5ef0de9c8d3dd1232075.png 711w" data-sizes="(max-width: 711px) 100vw, 711px" data-src="/assets/static/select-a-rendering.76c78fd.2262b6974abf5ef0de9c8d3dd1232075.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/select-a-rendering.76c78fd.2262b6974abf5ef0de9c8d3dd1232075.png" width="711" height="476" alt="Select a rendering"></noscript></p>
<p>The browser then displays an alert saying "An error occurred." and the following
in your logs:</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #D8DEE9FF">Exception: System.InvalidOperationException</span></span>
<span class="line"><span style="color: #D8DEE9FF">Message: placeholderKey</span></span>
<span class="line"><span style="color: #D8DEE9FF">Source: Sitecore.ExperienceEditor</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Pipelines.ExecutePageEditorAction.InsertRendering.Process</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">PipelineArgs args</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">Object , Object </span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Pipelines.CorePipeline.Run</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">PipelineArgs args</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Pipelines.DefaultCorePipelineManager.Run</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Pipelines.DefaultCorePipelineManager.Run</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">String pipelineName, PipelineArgs args, String pipelineDomain</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Pipelines.ExecutePageEditorAction.ExecutePageEditorActionPipeline.Run</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">ExecutePageEditorActionArgs args</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at Sitecore.Shell.Applications.WebEdit.Palette.OnPreInit</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">EventArgs e</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at </span><span style="color: #88C0D0">System.Web.UI.Page.PerformPreInit</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">   at System.Web.UI.Page.ProcessRequestMain</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint</span><span style="color: #ECEFF4">)</span></span></code></pre>
<h2 id="why-does-this-happen"><a href="#why-does-this-happen" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Why does this happen?</h2>
<p>The reason this happens is because both Sitecore and Vue.js need to use a <em>key</em> attribute.</p>
<ul>
<li>For Vue.js, the key attribute is a special attribute: <a href="https://vuejs.org/v2/api/#key" target="_blank" rel="nofollow noopener noreferrer">https://vuejs.org/v2/api/#key</a></li>
<li>For Sitecore, the key attribute is used on the placeholder DOM elements added to the
page in experience editor</li>
</ul>
<p>With both Vue.js and Experience Editor together, Vue.js removes the key attribute so when you
add a new component, Sitecore doesn't know which placeholder you are adding it to.</p>
<h2 id="the-solution"><a href="#the-solution" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>The Solution</h2>
<p>A solution to resolve this was to create an adapter in JavaScript, which does the following:</p>
<ol>
<li>Find all Sitecore placeholders and copy the <em>key</em> attribute to a new attribute, <em>data-phkey</em></li>
<li>Execute the standard Vue.js app initialisation code.</li>
<li>Copy the value from the new <em>data-phkey</em> attribute back to the <em>key</em>. attribute</li>
</ol>
<p>Here is the code to register the Vue.js app with the new adapter:</p>
</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_sitecoreVueApdater</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">InitialiseVueApp</span><span style="color: #D8DEE9FF">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">new</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">Vue</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">el</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">#app</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">store</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">router</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">components</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">...</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">);</span></span>
<span class="line"><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span></code></pre>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">export</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">default</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">SitecoreModeService</span></span>
<span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">IsExperienceEditor</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">boolean</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">typeof</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">Sitecore</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">===</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">undefined</span><span style="color: #ECEFF4">&quot;</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>

<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!!</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">Sitecore</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&amp;&amp;</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Sitecore</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">PageModes</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&amp;&amp;</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Sitecore</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">PageModes</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">PageEditor</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">export</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">SitecoreVueApdater</span></span>
<span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">readonly</span><span style="color: #D8DEE9FF"> _sitecoreModeService</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">SitecoreModeService</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">readonly</span><span style="color: #D8DEE9FF"> _keyAttributeName </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">key</span><span style="color: #ECEFF4">&quot;</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">readonly</span><span style="color: #D8DEE9FF"> _tempKeyAttributeName </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">data-phkey</span><span style="color: #ECEFF4">&quot;</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">constructor</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_sitecoreModeService</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">new</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">SitecoreModeService</span><span style="color: #D8DEE9FF">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>

<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">InitialiseVueApp</span><span style="color: #ECEFF4">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">initialiseVueApp</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=&gt;</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">void</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">void</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">BuildSitecorePlaceholderMap</span><span style="color: #D8DEE9FF">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">initialiseVueApp</span><span style="color: #D8DEE9FF">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">EnsureSitecorePlaceholderKeys</span><span style="color: #D8DEE9FF">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>

<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">BuildSitecorePlaceholderMap</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">void</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_sitecoreModeService</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">IsExperienceEditor</span><span style="color: #D8DEE9FF">())</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">pagePlaceholders</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">document</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">querySelectorAll</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">`</span><span style="color: #A3BE8C">code[</span><span style="color: #ECEFF4">${</span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_keyAttributeName</span><span style="color: #ECEFF4">}</span><span style="color: #A3BE8C">]</span><span style="color: #ECEFF4">`</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">CopyElementsAttribute</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">pagePlaceholders</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_keyAttributeName</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_tempKeyAttributeName</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>

<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">EnsureSitecorePlaceholderKeys</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">void</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_sitecoreModeService</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">IsExperienceEditor</span><span style="color: #D8DEE9FF">())</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">pagePlaceholders</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">document</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">querySelectorAll</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">`</span><span style="color: #A3BE8C">code[</span><span style="color: #ECEFF4">${</span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_tempKeyAttributeName</span><span style="color: #ECEFF4">}</span><span style="color: #A3BE8C">]</span><span style="color: #ECEFF4">`</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">CopyElementsAttribute</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">pagePlaceholders</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_tempKeyAttributeName</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">this</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">_keyAttributeName</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>

<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">CopyElementsAttribute</span><span style="color: #ECEFF4">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">elements</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">NodeListOf</span><span style="color: #ECEFF4">&lt;</span><span style="color: #8FBCBB">Element</span><span style="color: #ECEFF4">&gt;,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">fromAttributeName</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">string</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">toAttributeName</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">string</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">removeFromAttribute</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">void</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">for</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">placeholder</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">of</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">elements</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #D8DEE9">placeholder</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setAttribute</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">toAttributeName</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">placeholder</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">getAttribute</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">fromAttributeName</span><span style="color: #D8DEE9FF">) </span><span style="color: #81A1C1">||</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;&quot;</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">removeFromAttribute</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #D8DEE9">placeholder</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">removeAttribute</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">fromAttributeName</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
</div><!----><div class="mb-8 pt-2 border-t-3 border-double border-gray-600"><a href="/" class="font-bold uppercase active">Back to Blog</a></div></article></div></div><footer class="bg-brand-900 text-white"><div id="contact" class="container mx-auto flex flex-col items-center py-8"><div class="mb-3"><a href="/tag" class="text-white hover:text-white flex font-normal hover:underline"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="pl-2">Browse posts by tag</span></a></div><ul class="flex items-center space-x-8 mb-3"><li><a href="/rss.xml" aria-label="RSS" class="rounded-full bg-opacity-80 block bg-gray-800 p-2 text-white hover:text-gray-400 font-normal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li><li><a href="https://github.com/chowson" aria-label="Github" target="_blank" rel="noreferrer" class="rounded-full bg-opacity-80 block bg-gray-800 p-2 text-white hover:text-gray-400"><svg width="24" height="23" viewBox="0 0 20 19" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c1.814 0 3.487.435 5.02 1.306a9.827 9.827 0 0 1 3.639 3.542A9.33 9.33 0 0 1 20 9.734c0 2.121-.636 4.03-1.908 5.723a9.783 9.783 0 0 1-4.928 3.518c-.234.042-.408.012-.52-.09a.49.49 0 0 1-.17-.38l.006-.969c.005-.621.007-1.19.007-1.705 0-.82-.226-1.42-.677-1.8.495-.05.94-.126 1.335-.228a5.4 5.4 0 0 0 1.223-.494 3.62 3.62 0 0 0 1.055-.843c.282-.334.512-.777.69-1.33.178-.554.267-1.19.267-1.909a3.7 3.7 0 0 0-1.028-2.61c.32-.77.286-1.631-.105-2.586-.243-.076-.594-.03-1.054.14-.46.168-.86.354-1.198.557l-.495.304a9.478 9.478 0 0 0-2.5-.33c-.86 0-1.693.11-2.5.33a11.6 11.6 0 0 0-.553-.342c-.23-.135-.593-.298-1.088-.488-.494-.19-.863-.247-1.106-.171-.391.955-.426 1.816-.105 2.585A3.7 3.7 0 0 0 3.62 9.227c0 .719.089 1.352.267 1.902.178.549.406.993.683 1.33.278.339.627.622 1.048.85a5.4 5.4 0 0 0 1.224.494c.395.102.84.178 1.335.228-.338.305-.551.74-.638 1.306a2.631 2.631 0 0 1-.586.19 3.782 3.782 0 0 1-.742.063c-.287 0-.57-.09-.853-.272a2.256 2.256 0 0 1-.723-.792 2.068 2.068 0 0 0-.631-.66c-.256-.168-.471-.27-.645-.304l-.26-.038c-.182 0-.308.02-.378.057-.07.038-.09.087-.065.146.026.06.065.118.117.178.053.059.109.11.17.152l.09.063c.192.085.38.245.567.482.187.236.324.452.41.646l.13.292c.113.32.304.58.574.78.269.198.56.325.872.38.312.054.614.084.905.088.29.004.532-.01.723-.044l.299-.05c0 .32.002.694.007 1.12l.006.692a.49.49 0 0 1-.17.38c-.112.101-.286.13-.52.089a9.783 9.783 0 0 1-4.928-3.518C.636 13.763 0 11.855 0 9.734a9.33 9.33 0 0 1 1.341-4.886 9.827 9.827 0 0 1 3.64-3.542C6.512.436 8.185 0 10 0zM3.79 13.98c.025-.058-.005-.11-.092-.151-.087-.026-.143-.017-.17.025-.025.06.005.11.092.152.078.05.134.042.17-.025zm.403.432c.06-.043.052-.11-.026-.203-.087-.076-.157-.089-.209-.038-.06.042-.052.11.026.203.087.084.157.097.209.038zm.39.57c.078-.06.078-.14 0-.24-.07-.11-.143-.136-.221-.077-.078.042-.078.118 0 .228.078.11.152.14.221.089zm.547.532c.07-.067.052-.148-.052-.24-.104-.102-.19-.115-.26-.039-.078.068-.061.148.052.241.104.102.19.114.26.038zm.742.317c.026-.093-.03-.16-.169-.203-.13-.033-.213-.004-.247.09-.035.092.021.155.169.19.13.05.213.025.247-.077zm.82.064c0-.11-.073-.157-.22-.14-.14 0-.209.047-.209.14 0 .11.074.156.221.139.14 0 .209-.046.209-.14zm.756-.127c-.017-.093-.096-.131-.234-.114-.14.025-.2.088-.183.19.018.101.096.135.235.101.139-.034.2-.093.182-.177z" fill-rule="nonzero"></path></svg></a></li></ul><div>Copyright chowson.github.io 2021</div></div></footer></div>
    <script src="/assets/js/app.3b38bf93.js" defer></script><script src="/assets/js/page--src--templates--post-vue.f80259c2.js" defer></script>
  </body>
</html>