<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Managing Sitecore Content with Continuous Delivery | chowson.github.io</title><meta name="gridsome:hash" content="1c8e9faebecda25e3acf6bcb04e4b97b55ed7066"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.17"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#2F855A"><meta data-vue-tag="ssr" description="Simple Sitecore Content Feature Toggle for Continuous Delivery"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.062b9c780539aa46da100b820dbbfdb3.png"><link data-vue-tag="ssr" rel="preload" href="https://fonts.gstatic.com" crossorigin=""><link data-vue-tag="ssr" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&amp;display=swap"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&amp;display=swap" media="print" onload="this.media=&#x27;all&#x27;"><link rel="preload" href="/assets/css/0.styles.a65170fc.css" as="style"><link rel="preload" href="/assets/js/app.4d095bbd.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.7bedafe5.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.6fda5675.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.523a4251.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.6b8187ec.js"><link rel="prefetch" href="/assets/js/page--src--pages--tag-vue.686f057d.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.d45ad732.js"><link rel="stylesheet" href="/assets/css/0.styles.a65170fc.css"><script data-vue-tag="ssr" type="application/ld+json">{"@context":"https://schema.org/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://chowson.github.io/managing-sitecore-content-with-continuous-delivery/"},"headline":"headling","author":{"@type":"Person","name":"Chris Howson","sameAs":"https://github.io/chowson"},"publisher":{"@type":"Organization","name":"chowson.github.io","logo":{"@type":"ImageObject","url":"https://chowson.github.io/images/logo.png"}},"image":"https://chowson.github.io/images/logo.png","dateCreated":"2017-06-18","datePublished":"2017-06-18","dateModified":"2017-06-18","description":"Simple Sitecore Content Feature Toggle for Continuous Delivery"}</script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script type="text/javascript">
        (function() {
            function setTheme(newTheme) {
                window.__theme = newTheme;
                document.body.setAttribute('data-theme', newTheme);
            }

            var preferredTheme;
            try {
                preferredTheme = localStorage.getItem('theme');
            } catch (err) { }

            window.__setPreferredTheme = function(newTheme) {
                setTheme(newTheme);
                try {
                localStorage.setItem('theme', newTheme);
                } catch (err) {}
            }

            var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

            darkQuery.addListener(function(e) {
                window.__setPreferredTheme(e.matches ? 'theme-dark' : 'theme-light');
            });

            setTheme(preferredTheme || (darkQuery.matches ? 'theme-dark' : 'theme-light'));
        })();
    </script>
    <div data-server-rendered="true" id="app" class="content-wrapper bg-background-primary font-sans text-copy-primary leading-normal flex flex-col min-h-screen"><header class="border-t-14 border-brand-900"><nav class="container mx-auto flex flex-wrap justify-between items-center py-8"><div><a href="/" class="logo flex items-center active"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-terminal"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg><span class="font-bold m-2">chowson.github.io</span></a></div><div class="flex md:hidden"><a href="#" aria-label="Switch theme" class="text-copy-primary hover:text-gray-600 mr-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a><div class="block"><button name="Open menu" class="flex items-center px-3 py-2 border rounded border-gray-500 hover:text-gray-600 hover:border-gray-600"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="current-color h-3 w-3"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" fill="gray"></path></svg></button></div></div><ul class="uppercase tracking-wide font-bold w-full block flex-grow md:space-x-8 space-y-6 md:space-y-0 md:flex md:flex-initial md:w-auto items-center mt-8 md:mt-0 hidden"><li class="mb-6 md:mb-0"><div class="relative" data-v-023972e7><div data-v-51a16351 data-v-023972e7></div><div class="relative w-80" data-v-023972e7><input type="text" placeholder="Search (Press  "/" to focus)" value="" class="bg-background-form border border-gray-500 rounded-full px-4 pl-10 py-2 outline-none focus:border-brand-500 w-80" data-v-023972e7><div class="absolute top-0 ml-3" style="top:10px" data-v-023972e7><svg fill="currentColor" viewBox="0 0 24 24" width="24" height="24" class="text-gray-500 h-5 w-5" data-v-023972e7><path d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" class="heroicon-ui" data-v-023972e7></path></svg></div><!----></div><!----></div></li><li class="hidden md:block"><a href="#" aria-label="Switch theme" class="text-copy-primary hover:text-gray-600 mr-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a></li></ul></nav></header><div class="flex-grow"><div class="container-inner mx-auto my-8"><article><h1 class="text-4xl font-bold leading-tight">Managing Sitecore Content with Continuous Delivery</h1><div class="text-xl text-gray-600">July 18, 2017</div><div class="text-sm text-gray-600 mb-4">2 min read</div><div class="flex mb-8 text-sm"><a href="/tag/sitecore/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 text-brand-900 hover:bg-brand-300">
          sitecore
        </a></div><div class="markdown-body mb-8"><p>The standard way in Sitecore to prevent content being seen by users before
it's ready is to use publishing restrictions. Marking the content as unpublishable
ensures any publishes don't push the content to the web database.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 996 286' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-be6bec7557627f87d65b4df821f5f567'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-be6bec7557627f87d65b4df821f5f567)' width='996' height='286' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAASAEADASIAAhEBAxEB/8QAGwAAAgIDAQAAAAAAAAAAAAAAAAgBAgMEBQb/xAA1EAABAwICBQoEBwAAAAAAAAABAAIDBREEIQYSExiSBwgjMTJBUVVh0RQWkcEiQlNxcqGx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AM%2bN5DKpTcDPiMZUqHscLC6WV2weTqtFyexnkOpcTR3km%2bbop56PWqa5mHc2OToJYs3DWGWrnl3prpsOHym7Lsd1jUuD/f2WuGYWAubFhHMsc9m0Nv8ARAuUnNvrriDFWaUweokd9gqbtukPnlJ4JPZMi90Iv0E2XgVujBxHOzs/VAsO7bpD55SeCT2Ru26Q%2beUngk9kz/wcXgfqrR4aJjbagdne7s0CvbtukPnlJ4JPZXj5uWkTAQK1Rjc3/FFIe63h6podjF%2bkzhCgwxAXEbL/AMQgxFrdsDYXuM7LkYkDbS5fmP8AqEIKzAazhYWXoWdkfshCCUIQgEHqKEIP/9k=' /%3e%3c/svg%3e" width="996" alt="Item publishing restrictions" data-srcset="/assets/static/item-publishing-restrictions.82a2fbd.0e486e04eae23435166a236675c32d13.jpg 480w, /assets/static/item-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg 996w" data-sizes="(max-width: 996px) 100vw, 996px" data-src="/assets/static/item-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/item-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg" width="996" alt="Item publishing restrictions"></noscript></p>
<p>Whilst developing a new area of the site, continuous delivery will deploy partially
completed pages. To ensure the new content is hidden from users, it is marked
as  unpublishable. The problem with this is the new content needs to be visible on test environments
and each deployment to the test environment resets the item to unpublishable.</p>
<p>Having to mark the items as publishable and publish them on the test environments breaks
the continuous delivery deployment pipeline because it introduces a manual step. Continuous
delivery aims to have a fully automated process that you can deploy and release any version
of the software to any environment.</p>
<p>The following solution allows new content to be deployed to both master and web
databases with continuous delivery but prevents public users from seeing it.</p>
<p>To achieve this, a <em>Controller Rendering</em> is added to a new page and returns
404 response unless some particular criteria is matched. The example provided checks for
the existence of a known querystring:</p>
<pre class="shiki" style="background-color: #2e3440"><code><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">SitecoreContentFeatureToggleController</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">Controller</span>
<span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">string</span><span style="color: #D8DEE9FF"> ToggleOverrideQueryStringKey </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">SomethingNotEasyToGuess</span><span style="color: #ECEFF4">"</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9FF">	</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">ActionResult</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Index</span><span style="color: #ECEFF4">()</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">ToggleOverridePresent</span><span style="color: #ECEFF4">())</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">new</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">EmptyResult</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span>

<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">HttpNotFound</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>

<span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">bool</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">ToggleOverridePresent</span><span style="color: #ECEFF4">()</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span>
<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">string</span><span style="color: #D8DEE9FF"> enableToggleOverride </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">Request</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">QueryString</span><span style="color: #ECEFF4">[</span><span style="color: #D8DEE9">ToggleOverrideQueryStringKey</span><span style="color: #ECEFF4">]</span><span style="color: #81A1C1">;</span>

<span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">string</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">IsNullOrEmpty</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">enableToggleOverride</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&&</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">enableToggleOverride</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">Equals</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">true</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span>
<span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span>
<span style="color: #ECEFF4">}</span></code></pre>
<p>Other simple checks could be implemented instead of checking the querystring:</p>
<ul>
<li>Existence of a particular request header</li>
<li>Existence of a particular cookie (with particular value)</li>
<li>Request IP address whitelist</li>
</ul>
<p>When making the <em>Controller Rendering</em>, it is important to ensure the rendering's caching
fields are all unchecked. If it is marked as cacheable then the check is only applied to the first
visitor rather than to each request.</p>
<p>As the title suggests, this is a simple feature toggle and does not prevent
other parts of the site from linking to the new content. For example, using this
for news articles would not prevent the new article being picked up on the news
landing page.</p>
<p>To use this approach, simply create the controller rendering and add it to the
content item instead of marking the item as unpublishable.</p>
<h3 id="benefits-of-approach"><a href="#benefits-of-approach" aria-hidden="true"><span class="icon icon-link"></span></a>Benefits of Approach</h3>
<ul>
<li>The deployment process for each environment is the same.</li>
<li>The test team don't need to make the new content items publishable and then publish them
on each deployment to the test environment.</li>
<li>Each deployment to the UAT environment won't require the unpublishable flag removing and
the content being published.</li>
<li>If the client wants to see the new features on the live site, then they can.</li>
<li>Public users receive a 404 response when they hit the URL.</li>
</ul>
<h3 id="when-to-use-this"><a href="#when-to-use-this" aria-hidden="true"><span class="icon icon-link"></span></a>When to use this?</h3>
<ul>
<li>When the new content is isolated - e.g. Developing a new homepage - publishing the item to a URL with the feature toggle rendering will allow authorised people to see the new page on the without the public being able to see it.</li>
</ul>
<h3 id="when-not-to-use-it"><a href="#when-not-to-use-it" aria-hidden="true"><span class="icon icon-link"></span></a>When not to use it?</h3>
<ul>
<li>Any new page which other pages have been set up to link to.</li>
</ul>
</div><!----><div class="mb-8 pt-2 border-t-3 border-double border-gray-600"><a href="/" class="font-bold uppercase active">Back to Blog</a></div></article></div></div><footer class="bg-brand-900 text-white"><div id="contact" class="container mx-auto flex flex-col items-center py-8"><div class="mb-3"><a href="/tag" class="text-white hover:text-white flex font-normal hover:underline"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg><span class="pl-2">Browse posts by tag</span></a></div><ul class="flex items-center space-x-8 mb-3"><li><a href="/rss.xml" aria-label="RSS" class="rounded-full bg-opacity-80 block bg-gray-800 p-2 text-white hover:text-gray-400 font-normal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li><li><a href="https://github.com/chowson" aria-label="Github" target="_blank" rel="noreferrer" class="rounded-full bg-opacity-80 block bg-gray-800 p-2 text-white hover:text-gray-400"><svg width="24" height="23" viewBox="0 0 20 19" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c1.814 0 3.487.435 5.02 1.306a9.827 9.827 0 0 1 3.639 3.542A9.33 9.33 0 0 1 20 9.734c0 2.121-.636 4.03-1.908 5.723a9.783 9.783 0 0 1-4.928 3.518c-.234.042-.408.012-.52-.09a.49.49 0 0 1-.17-.38l.006-.969c.005-.621.007-1.19.007-1.705 0-.82-.226-1.42-.677-1.8.495-.05.94-.126 1.335-.228a5.4 5.4 0 0 0 1.223-.494 3.62 3.62 0 0 0 1.055-.843c.282-.334.512-.777.69-1.33.178-.554.267-1.19.267-1.909a3.7 3.7 0 0 0-1.028-2.61c.32-.77.286-1.631-.105-2.586-.243-.076-.594-.03-1.054.14-.46.168-.86.354-1.198.557l-.495.304a9.478 9.478 0 0 0-2.5-.33c-.86 0-1.693.11-2.5.33a11.6 11.6 0 0 0-.553-.342c-.23-.135-.593-.298-1.088-.488-.494-.19-.863-.247-1.106-.171-.391.955-.426 1.816-.105 2.585A3.7 3.7 0 0 0 3.62 9.227c0 .719.089 1.352.267 1.902.178.549.406.993.683 1.33.278.339.627.622 1.048.85a5.4 5.4 0 0 0 1.224.494c.395.102.84.178 1.335.228-.338.305-.551.74-.638 1.306a2.631 2.631 0 0 1-.586.19 3.782 3.782 0 0 1-.742.063c-.287 0-.57-.09-.853-.272a2.256 2.256 0 0 1-.723-.792 2.068 2.068 0 0 0-.631-.66c-.256-.168-.471-.27-.645-.304l-.26-.038c-.182 0-.308.02-.378.057-.07.038-.09.087-.065.146.026.06.065.118.117.178.053.059.109.11.17.152l.09.063c.192.085.38.245.567.482.187.236.324.452.41.646l.13.292c.113.32.304.58.574.78.269.198.56.325.872.38.312.054.614.084.905.088.29.004.532-.01.723-.044l.299-.05c0 .32.002.694.007 1.12l.006.692a.49.49 0 0 1-.17.38c-.112.101-.286.13-.52.089a9.783 9.783 0 0 1-4.928-3.518C.636 13.763 0 11.855 0 9.734a9.33 9.33 0 0 1 1.341-4.886 9.827 9.827 0 0 1 3.64-3.542C6.512.436 8.185 0 10 0zM3.79 13.98c.025-.058-.005-.11-.092-.151-.087-.026-.143-.017-.17.025-.025.06.005.11.092.152.078.05.134.042.17-.025zm.403.432c.06-.043.052-.11-.026-.203-.087-.076-.157-.089-.209-.038-.06.042-.052.11.026.203.087.084.157.097.209.038zm.39.57c.078-.06.078-.14 0-.24-.07-.11-.143-.136-.221-.077-.078.042-.078.118 0 .228.078.11.152.14.221.089zm.547.532c.07-.067.052-.148-.052-.24-.104-.102-.19-.115-.26-.039-.078.068-.061.148.052.241.104.102.19.114.26.038zm.742.317c.026-.093-.03-.16-.169-.203-.13-.033-.213-.004-.247.09-.035.092.021.155.169.19.13.05.213.025.247-.077zm.82.064c0-.11-.073-.157-.22-.14-.14 0-.209.047-.209.14 0 .11.074.156.221.139.14 0 .209-.046.209-.14zm.756-.127c-.017-.093-.096-.131-.234-.114-.14.025-.2.088-.183.19.018.101.096.135.235.101.139-.034.2-.093.182-.177z" fill-rule="nonzero"></path></svg></a></li></ul><div>Copyright chowson.github.io 2021</div></div></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Managing Sitecore Content with Continuous Delivery","description":"Simple Sitecore Content Feature Toggle for Continuous Delivery","date":"July 18, 2017","timeToRead":2,"content":"\u003Cp\u003EThe standard way in Sitecore to prevent content being seen by users before\nit's ready is to use publishing restrictions. Marking the content as unpublishable\nensures any publishes don't push the content to the web database.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 996 286' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-be6bec7557627f87d65b4df821f5f567'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-be6bec7557627f87d65b4df821f5f567)' width='996' height='286' xlink:href='data:image\u002Fjpeg%3bbase64%2c\u002F9j\u002F2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj\u002F2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj\u002FwAARCAASAEADASIAAhEBAxEB\u002F8QAGwAAAgIDAQAAAAAAAAAAAAAAAAgBAgMEBQb\u002FxAA1EAABAwICBQoEBwAAAAAAAAABAAIDBREEIQYSExiSBwgjMTJBUVVh0RQWkcEiQlNxcqGx\u002F8QAFAEBAAAAAAAAAAAAAAAAAAAAAP\u002FEABQRAQAAAAAAAAAAAAAAAAAAAAD\u002F2gAMAwEAAhEDEQA\u002FAM%2bN5DKpTcDPiMZUqHscLC6WV2weTqtFyexnkOpcTR3km%2bbop56PWqa5mHc2OToJYs3DWGWrnl3prpsOHym7Lsd1jUuD\u002Ff2WuGYWAubFhHMsc9m0Nv8ARAuUnNvrriDFWaUweokd9gqbtukPnlJ4JPZMi90Iv0E2XgVujBxHOzs\u002FVAsO7bpD55SeCT2Ru26Q%2beUngk9kz\u002FwcXgfqrR4aJjbagdne7s0CvbtukPnlJ4JPZXj5uWkTAQK1Rjc3\u002FFFIe63h6podjF%2bkzhCgwxAXEbL\u002FAMQgxFrdsDYXuM7LkYkDbS5fmP8AqEIKzAazhYWXoWdkfshCCUIQgEHqKEIP\u002F9k=' \u002F%3e%3c\u002Fsvg%3e\" width=\"996\" alt=\"Item publishing restrictions\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fitem-publishing-restrictions.82a2fbd.0e486e04eae23435166a236675c32d13.jpg 480w, \u002Fassets\u002Fstatic\u002Fitem-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg 996w\" data-sizes=\"(max-width: 996px) 100vw, 996px\" data-src=\"\u002Fassets\u002Fstatic\u002Fitem-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fitem-publishing-restrictions.f6ff8a4.0e486e04eae23435166a236675c32d13.jpg\" width=\"996\" alt=\"Item publishing restrictions\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EWhilst developing a new area of the site, continuous delivery will deploy partially\ncompleted pages. To ensure the new content is hidden from users, it is marked\nas  unpublishable. The problem with this is the new content needs to be visible on test environments\nand each deployment to the test environment resets the item to unpublishable.\u003C\u002Fp\u003E\n\u003Cp\u003EHaving to mark the items as publishable and publish them on the test environments breaks\nthe continuous delivery deployment pipeline because it introduces a manual step. Continuous\ndelivery aims to have a fully automated process that you can deploy and release any version\nof the software to any environment.\u003C\u002Fp\u003E\n\u003Cp\u003EThe following solution allows new content to be deployed to both master and web\ndatabases with continuous delivery but prevents public users from seeing it.\u003C\u002Fp\u003E\n\u003Cp\u003ETo achieve this, a \u003Cem\u003EController Rendering\u003C\u002Fem\u003E is added to a new page and returns\n404 response unless some particular criteria is matched. The example provided checks for\nthe existence of a known querystring:\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #2e3440\"\u003E\u003Ccode\u003E\u003Cspan style=\"color: #81A1C1\"\u003Epublic\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eclass\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003ESitecoreContentFeatureToggleController\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003EController\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eprivate\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E ToggleOverrideQueryStringKey \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003ESomethingNotEasyToGuess\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E\t\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Epublic\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003EActionResult\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EIndex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EToggleOverridePresent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E())\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Enew\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003EEmptyResult\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EHttpNotFound\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eprivate\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Ebool\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EToggleOverridePresent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E enableToggleOverride \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003ERequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EQueryString\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E[\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EToggleOverrideQueryStringKey\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E]\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E!\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EIsNullOrEmpty\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EenableToggleOverride\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E&&\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EenableToggleOverride\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EEquals\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EOther simple checks could be implemented instead of checking the querystring:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EExistence of a particular request header\u003C\u002Fli\u003E\n\u003Cli\u003EExistence of a particular cookie (with particular value)\u003C\u002Fli\u003E\n\u003Cli\u003ERequest IP address whitelist\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EWhen making the \u003Cem\u003EController Rendering\u003C\u002Fem\u003E, it is important to ensure the rendering's caching\nfields are all unchecked. If it is marked as cacheable then the check is only applied to the first\nvisitor rather than to each request.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the title suggests, this is a simple feature toggle and does not prevent\nother parts of the site from linking to the new content. For example, using this\nfor news articles would not prevent the new article being picked up on the news\nlanding page.\u003C\u002Fp\u003E\n\u003Cp\u003ETo use this approach, simply create the controller rendering and add it to the\ncontent item instead of marking the item as unpublishable.\u003C\u002Fp\u003E\n\u003Ch3 id=\"benefits-of-approach\"\u003E\u003Ca href=\"#benefits-of-approach\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBenefits of Approach\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EThe deployment process for each environment is the same.\u003C\u002Fli\u003E\n\u003Cli\u003EThe test team don't need to make the new content items publishable and then publish them\non each deployment to the test environment.\u003C\u002Fli\u003E\n\u003Cli\u003EEach deployment to the UAT environment won't require the unpublishable flag removing and\nthe content being published.\u003C\u002Fli\u003E\n\u003Cli\u003EIf the client wants to see the new features on the live site, then they can.\u003C\u002Fli\u003E\n\u003Cli\u003EPublic users receive a 404 response when they hit the URL.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"when-to-use-this\"\u003E\u003Ca href=\"#when-to-use-this\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhen to use this?\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EWhen the new content is isolated - e.g. Developing a new homepage - publishing the item to a URL with the feature toggle rendering will allow authorised people to see the new page on the without the public being able to see it.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"when-not-to-use-it\"\u003E\u003Ca href=\"#when-not-to-use-it\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhen not to use it?\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EAny new page which other pages have been set up to link to.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","tags":[{"title":"sitecore","path":"\u002Ftag\u002Fsitecore\u002F"}],"references":[],"path":"\u002Fmanaging-sitecore-content-with-continuous-delivery\u002F"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.4d095bbd.js" defer></script><script src="/assets/js/page--src--templates--post-vue.7bedafe5.js" defer></script>
  </body>
</html>