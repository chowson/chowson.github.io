{"hash":"1c8e9faebecda25e3acf6bcb04e4b97b55ed7066","data":{"post":{"title":"Dynamic HTML Tags in MVC Razor","description":"Html.BeginForm for any HTML Tag","date":"June 1, 2016","timeToRead":2,"content":"<p>The HTML helper method <em>Html.BeginForm</em> is a useful way to dynamically create\n<code>&#x3C;form></code> tags. It would be useful to be able to do this for other HTML\ntags so that the HTML output is dynamically generated keeping your markup clean.</p>\n<h4 id=\"example\"><a href=\"#example\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>In the following example, <code>_dataProvider.GetAdvertDataAttributes()</code> returns\nan <code>IDictionary&#x3C;string, object></code> and defines any additional data attributes\nrequired on the component:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// Controller</span>\n<span style=\"color: #81A1C1\">var</span><span style=\"color: #D8DEE9FF\"> model </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">AdvertModel</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">model</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">AdvertImageSrc</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">/path/to/image.jpg</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">model</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">AdvertImageAlt</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Advert Image</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9\">model</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">AdvertClass</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">_dataProvider</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">GetAdvertClass</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9\">model</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">AdvertDataAttributes</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">_dataProvider</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">GetAdvertDataAttributes</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span></code></pre>\n<p>Usually <em>AdvertDataAttributes</em> would require expanding into a string to output in\nthe Razor view, for example:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">&lt;!-- Razor View --&gt;</span>\n<span style=\"color: #81A1C1\">&lt;div</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">class</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">@Model.AdvertClass</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">@</span><span style=\"color: #8FBCBB\">Model</span><span style=\"color: #D8DEE9FF\">.</span><span style=\"color: #8FBCBB\">AdvertDataAttributesString</span><span style=\"color: #81A1C1\">&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;img</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">src</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">@Model.AdvertImageSrc</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">alt</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">@Model.AdvertImageAlt</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\"> /&gt;</span>\n<span style=\"color: #81A1C1\">&lt;/div&gt;</span></code></pre>\n<p>This requires code to convert the dictionary into a string ensuring that the attributes\nare encoded properly using <code>HttpUtility.HtmlAttributeEncode</code>. Also, it could lead to\n<code>class=\"\"</code> being output to the page.</p>\n<h3 id=\"solution\"><a href=\"#solution\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Solution</h3>\n<p>Using the extension method for <code>System.Web.Mvc.HtmlHelper</code> and supporting <em>MvcTag</em>\nclass found at the end of the post, it becomes a lot simpler to create the dynamic\nHTML required.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// Razor View</span>\n<span style=\"color: #81A1C1\">using</span><span style=\"color: #D8DEE9FF\"> (Html.BeginTag(\"div\", Model.AdvertClass, Model.AdvertDataAttributes))</span>\n<span style=\"color: #D8DEE9FF\">{</span>\n<span style=\"color: #D8DEE9FF\">    &lt;img src</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\">\"@Model.AdvertImageSrc\" alt</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\">\"@Model.AdvertImageAlt\" /&gt;</span>\n<span style=\"color: #D8DEE9FF\">}</span></code></pre>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">&lt;!-- HTML output --&gt;</span>\n<span style=\"color: #81A1C1\">&lt;div</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">class</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">advert-container</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">data-name</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">advert1</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;img</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">src</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">/path/to/image.jpg</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">alt</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Advert Image</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\"> /&gt;</span>\n<span style=\"color: #81A1C1\">&lt;/div&gt;</span></code></pre>\n<p>The benefit of this is that if the model variables <em>AdvertClass</em>\nand <em>AdvertDataAttributes</em> were <em>null</em>, then the HTML output\nwould not have any empty attributes, i.e.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">&lt;!-- HTML output --&gt;</span>\n<span style=\"color: #81A1C1\">&lt;div&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;img</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">src</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">/path/to/image.jpg</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">alt</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Advert Image</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\"> /&gt;</span>\n<span style=\"color: #81A1C1\">&lt;/div&gt;</span></code></pre>\n<h3 id=\"code\"><a href=\"#code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Code</h3>\n<p>To achieve this, the following <em>HtmlHelper</em> extension method and\nsupporting <em>MvcTag</em> class are required:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// HtmlHelperExtensions.cs</span>\n<span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">static</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">HtmlHelperExtensions</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">static</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">IDisposable</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">BeginTag</span><span style=\"color: #ECEFF4\">&lt;</span><span style=\"color: #D8DEE9FF\">T</span><span style=\"color: #ECEFF4\">&gt;(</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">HtmlHelper</span><span style=\"color: #ECEFF4\">&lt;</span><span style=\"color: #81A1C1\">T</span><span style=\"color: #ECEFF4\">&gt;</span><span style=\"color: #D8DEE9FF\"> htmlHelper</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">string</span><span style=\"color: #D8DEE9FF\"> tag</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">string</span><span style=\"color: #D8DEE9FF\"> className </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">IDictionary</span><span style=\"color: #ECEFF4\">&lt;</span><span style=\"color: #81A1C1\">string</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">object</span><span style=\"color: #ECEFF4\">&gt;</span><span style=\"color: #D8DEE9FF\"> htmlAttributes </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">htmlAttributes</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">!=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">?</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">MvcTag</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">htmlHelper</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">ViewContext</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">tag</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">className</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">RouteValueDictionary</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">htmlAttributes</span><span style=\"color: #ECEFF4\">))</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">MvcTag</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">htmlHelper</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">ViewContext</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">tag</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">className</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #4C566A\">// MvcTag.cs</span>\n<span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">MvcTag</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">IDisposable</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">TagBuilder</span><span style=\"color: #D8DEE9FF\"> _tagBuilder</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">bool</span><span style=\"color: #D8DEE9FF\"> _disposed</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">FormContext</span><span style=\"color: #D8DEE9FF\"> _originalFormContext</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">ViewContext</span><span style=\"color: #D8DEE9FF\"> _viewContext</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">TextWriter</span><span style=\"color: #D8DEE9FF\"> _writer</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">MvcTag</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">ViewContext</span><span style=\"color: #D8DEE9FF\"> viewContext</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">string</span><span style=\"color: #D8DEE9FF\"> tag</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">string</span><span style=\"color: #D8DEE9FF\"> className </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">RouteValueDictionary</span><span style=\"color: #D8DEE9FF\"> attributes </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">viewContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">==</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">throw</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">ArgumentNullException</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">viewContext</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_viewContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">viewContext</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_writer</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">viewContext</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">Writer</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_originalFormContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">viewContext</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">FormContext</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">viewContext</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">FormContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">FormContext</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_tagBuilder</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">TagBuilder</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">tag</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_tagBuilder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">MergeAttributes</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">attributes</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">!</span><span style=\"color: #D8DEE9\">string</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">IsNullOrEmpty</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">className</span><span style=\"color: #ECEFF4\">))</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #D8DEE9\">_tagBuilder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">AddCssClass</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">className</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">Begin</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">Dispose</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">Dispose</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">true</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">GC</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">SuppressFinalize</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">Begin</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_writer</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">WriteLine</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">MvcHtmlString</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">_tagBuilder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">ToString</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">TagRenderMode</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">StartTag</span><span style=\"color: #ECEFF4\">)))</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">End</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_writer</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">WriteLine</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">_writer</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">WriteLine</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">MvcHtmlString</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">_tagBuilder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">ToString</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">TagRenderMode</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">EndTag</span><span style=\"color: #ECEFF4\">)))</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">protected</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">virtual</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">Dispose</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">bool</span><span style=\"color: #D8DEE9FF\"> disposing</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">!</span><span style=\"color: #D8DEE9\">_disposed</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #D8DEE9\">_disposed</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true;</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #88C0D0\">End</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">_viewContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">!=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #D8DEE9\">_viewContext</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">OutputClientValidation</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #D8DEE9\">_viewContext</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">FormContext</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">_originalFormContext</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">void</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">EndForm</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">Dispose</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #81A1C1\">true</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n","tags":[{"title":"mvc","path":"/tag/mvc/"}],"references":[],"path":"/dynamic-html-tags-in-mvc-razor/"}},"context":{}}