{"hash":"a5f4f482c6a4a22d5bf30a578e028699128c226a","data":{"post":{"title":"Vue.js, Sitecore MVC and the Experience Editor","description":"Vue.js, Sitecore MVC and the Experience Editor","date":"September 18, 2019","timeToRead":2,"content":"<p>There is a compatibility issue between Vue.js and Sitecore MVC experience editor with\nSitecore 9.1. This issue is with a standard Sitecore MVC solution rather than Sitecore JSS.</p>\n<h2 id=\"the-problem\"><a href=\"#the-problem\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>The Problem</h2>\n<p>The problem occurs when adding a new component in experience editor. The problem\nmanifests itself by appearing to ignore placeholder settings and show you the treeview\nfor selecting a rendering:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 711 476' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-2669f971b39d414e8d320aad60624cab'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-2669f971b39d414e8d320aad60624cab)' width='711' height='476' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAE60lEQVRo3u1ZW09jVRg9P8DEGH8AEO53CPeLwVdDeIFAwjXcyZAivvCAkUB4GhMTdRJfRhN9GUd90KgzTmLGOKAYgw73OxQoUEoppS23dkrL8qxNdqeWSnQGDGXOTla/vb/z7e/stfa3Tx%2b2kpCQgPj4eNBKcJyYmIi4uLi/PQuMIxgn7VWEXBvXHhsb61u37CtJSUlIT09HSkoKkpOTRXBaWpogn5WVhdTUVBHIZ4xhPC197F8k%2bcsSkuTJpaioyMcjLy9PWIUB7e3t6OvrQ09PD3Q6HaqqqlBbW4vOzk7hb2trQ1dXF/r7%2b4Xt6OhAd3c3CgoKRHIK8TwLlPMvU4CSkhLU1dUJIXJzc9Hb24ucnJxTAbKzs4UiBEllZmaKPneflpPy8/NRWFgoJjO%2brKxMVE5kZCRiYmJ8JUZwTDLyCNHSR0vIOIno6GjfsbsMEZiTnLh%2bWQEkT34KfyorK9HS0oKKigrRJ6gYq6C1tRXV1dWiKoimpiZBnrHl5eXiGWPkmJa%2b4uJiUU3MUVNTI6qG8/m8tLTUl6uhoUHEUFgulgu8DMhKYLXJo0urhIWFiQHPvfzwyQAqRYHo5wIzMjJEn34qKr8HjOE8mZQv5K6yLz%2bczO//IZWlz1jOj4qKAtcSHh5%2baYiIiDjTV7jzjY2NYidouSu00if99fX1vr4c%2b8cEzvMf%2b%2bcPhJzf3NwsqvD/hoIXvClerxcSbKf2BCcnZ%2bEf6w8%2bczqd2N7eFjk8Hs8/xl41KFy8JO5yuVTuJzhwuvHE7Ybn%2bBjHKkhIkgomDNvh4SFWVlZ8uYLFXUX4BLA79rCin8ekYR%2bf/mSA2WTEwsIiFhcXsbS0BIPBgNnZWbhVYdjkPGmPjo5EjL8vJI5A4ILdx151t71Bg/3JBwrACpACyOMUEgJIAo69PWwY9Hi8aMP738zDZrUIQqwAk8kEo9GIzc1NH7lrJwB313V0gCXjPn6dtMDjdsHhcGB3dxdWqxV7qkD7%2b/tniIe8AM9yZv3jr00F%2bP7qxN/d%2bV/Oa1cBz9M0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAFeYAFWV1dDT4CLuF5i490g7w6kACFzNYYQb15Vf8/JU%2bvf/1cVwDs9f7CUA33n%2bc/Ds8z5L3CqgOeJytgdFMculxrnFNV5Zq7z1K/w5sdmswnI2x/eCLEvrfTLfjBfsFhpmZvvuUjInO8NzODG92PQqWj7dhQ3vhtFx/1x6O6N4c9lI%2bw7FpjN29jZ2RE3XJzDvtlshsVigcJEvNfn%2bZ2ZmfHdBNMuLCwILC8vC8t7Ql6B6/V6zM3NiTHBj9/a2prwE/Pz8wKM4ZjvsNvtFwabzY49hx1bO1a89vEjvPruA%2bR%2b8gte/%2bw3ZN0eRNSHD/HKzR/w%2bR8L2Nsxw2gyCW683Z6amhLcyHlra%2bupAByMj4%2bLAArAxZM4CY%2bNjWF6elr4CJJjwpGREUxMTAgfRWBiCsIcxOTkpIij4qcLt12QADa14lQBLFYU3LqHl9%2b5i7xb9/HG7R9R9NEDxNz8Gi%2b9fQd3flffvbkBvcpjeHgYQ0NDGBwcFHy43o2NDSgyKUv44OBAQJavhPQH80m//5zAZxdJPjDXBw8fQ/fFI7z55QDa7/4s%2bm99NSAwuryB7S2T2Mj19XUBkma1cmN5DP4CpNRIS3um2dwAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"711\" alt=\"Select a rendering\" data-srcset=\"/assets/static/select-a-rendering.e567930.2262b6974abf5ef0de9c8d3dd1232075.png 711w\" data-sizes=\"(max-width: 711px) 100vw, 711px\" data-src=\"/assets/static/select-a-rendering.e567930.2262b6974abf5ef0de9c8d3dd1232075.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/select-a-rendering.e567930.2262b6974abf5ef0de9c8d3dd1232075.png\" width=\"711\" alt=\"Select a rendering\"></noscript></p>\n<p>The browser then displays an alert saying \"An error occurred.\" and the following\nin your logs:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">Exception: System.InvalidOperationException</span>\n<span style=\"color: #D8DEE9FF\">Message: placeholderKey</span>\n<span style=\"color: #D8DEE9FF\">Source: Sitecore.ExperienceEditor</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Pipelines.ExecutePageEditorAction.InsertRendering.Process</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">PipelineArgs args</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">Object , Object </span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Pipelines.CorePipeline.Run</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">PipelineArgs args</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Pipelines.DefaultCorePipelineManager.Run</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Pipelines.DefaultCorePipelineManager.Run</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">String pipelineName, PipelineArgs args, String pipelineDomain</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Pipelines.ExecutePageEditorAction.ExecutePageEditorActionPipeline.Run</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">ExecutePageEditorActionArgs args</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at Sitecore.Shell.Applications.WebEdit.Palette.OnPreInit</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">EventArgs e</span><span style=\"color: #ECEFF4\">)</span>\n<span style=\"color: #D8DEE9FF\">   at </span><span style=\"color: #88C0D0\">System.Web.UI.Page.PerformPreInit</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">   at System.Web.UI.Page.ProcessRequestMain</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint</span><span style=\"color: #ECEFF4\">)</span></code></pre>\n<h2 id=\"why-does-this-happen\"><a href=\"#why-does-this-happen\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Why does this happen?</h2>\n<p>The reason this happens is because both Sitecore and Vue.js need to use a <em>key</em> attribute.</p>\n<ul>\n<li>For Vue.js, the key attribute is a special attribute: <a href=\"https://vuejs.org/v2/api/#key\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://vuejs.org/v2/api/#key</a></li>\n<li>For Sitecore, the key attribute is used on the placeholder DOM elements added to the\npage in experience editor</li>\n</ul>\n<p>With both Vue.js and Experience Editor together, Vue.js removes the key attribute so when you\nadd a new component, Sitecore doesn't know which placeholder you are adding it to.</p>\n<h2 id=\"the-solution\"><a href=\"#the-solution\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>The Solution</h2>\n<p>A solution to resolve this was to create an adapter in JavaScript, which does the following:</p>\n<ol>\n<li>Find all Sitecore placeholders and copy the <em>key</em> attribute to a new attribute, <em>data-phkey</em></li>\n<li>Execute the standard Vue.js app initialisation code.</li>\n<li>Copy the value from the new <em>data-phkey</em> attribute back to the <em>key</em>. attribute</li>\n</ol>\n<p>Here is the code to register the Vue.js app with the new adapter:</p>\n</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_sitecoreVueApdater</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">InitialiseVueApp</span><span style=\"color: #D8DEE9FF\">(</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Vue</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">el</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">#app</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">store</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">router</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">components</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">...</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">);</span>\n<span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></code></pre>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">export</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">default</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">SitecoreModeService</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">IsExperienceEditor</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">boolean</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">typeof</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">Sitecore</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #81A1C1\">===</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">undefined</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">!!</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">Sitecore</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">&&</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Sitecore</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">PageModes</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">&&</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Sitecore</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">PageModes</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">PageEditor</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">export</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">class</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">SitecoreVueApdater</span>\n<span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> _sitecoreModeService</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">SitecoreModeService</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> _keyAttributeName </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">key</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">readonly</span><span style=\"color: #D8DEE9FF\"> _tempKeyAttributeName </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">data-phkey</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">constructor</span><span style=\"color: #ECEFF4\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_sitecoreModeService</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">SitecoreModeService</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">public</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">InitialiseVueApp</span><span style=\"color: #ECEFF4\">(</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">initialiseVueApp</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">void</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">void</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">BuildSitecorePlaceholderMap</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">initialiseVueApp</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">EnsureSitecorePlaceholderKeys</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">BuildSitecorePlaceholderMap</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">void</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_sitecoreModeService</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">IsExperienceEditor</span><span style=\"color: #D8DEE9FF\">())</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">pagePlaceholders</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">document</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">querySelectorAll</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">code[</span><span style=\"color: #ECEFF4\">${</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_keyAttributeName</span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #A3BE8C\">]</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">CopyElementsAttribute</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">pagePlaceholders</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_keyAttributeName</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_tempKeyAttributeName</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">EnsureSitecorePlaceholderKeys</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">void</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_sitecoreModeService</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">IsExperienceEditor</span><span style=\"color: #D8DEE9FF\">())</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">pagePlaceholders</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">document</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">querySelectorAll</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">code[</span><span style=\"color: #ECEFF4\">${</span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_tempKeyAttributeName</span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #A3BE8C\">]</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">CopyElementsAttribute</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">pagePlaceholders</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_tempKeyAttributeName</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">this</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">_keyAttributeName</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">private</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">CopyElementsAttribute</span><span style=\"color: #ECEFF4\">(</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">elements</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">NodeListOf</span><span style=\"color: #ECEFF4\">&lt;</span><span style=\"color: #8FBCBB\">Element</span><span style=\"color: #ECEFF4\">&gt;,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">fromAttributeName</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">string</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">toAttributeName</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">string</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #D8DEE9\">removeFromAttribute</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">false</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #81A1C1\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">void</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">for</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">placeholder</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">of</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">elements</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #D8DEE9\">placeholder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">setAttribute</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">toAttributeName</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">placeholder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">getAttribute</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">fromAttributeName</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #81A1C1\">||</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #81A1C1\">if</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">removeFromAttribute</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #D8DEE9\">placeholder</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">removeAttribute</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">fromAttributeName</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n","tags":[{"title":"sitecore","path":"/tag/sitecore/"}],"references":[],"path":"/vuejs-sitecore-mvc-and-experience-editor/"}},"context":{}}