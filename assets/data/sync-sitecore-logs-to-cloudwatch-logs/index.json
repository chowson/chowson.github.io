{"hash":"f54a26b6994b22fc740b582c54afcb6a230cac5b","data":{"post":{"title":"Sync Sitecore Logs to AWS CloudWatch Logs","description":"Sync Sitecore log files to AWS CloudWatch logs","date":"December 16, 2015","timeToRead":3,"content":"<p>Cloud hosted infrastructure introduces the challenge of monitoring\nservers on instances which will be not be around forever. Whether\ninstances are terminated during a blue/green deployment or during a scale\ndown action of an auto scaling group, log files generated by Sitecore\nwill be lost.</p>\n<p>One method of shipping these logs off the server is to use <em>AWS CloudWatch\nLogs</em>. AWS Windows AMIs come pre-configured with the <em>EC2ConfigService</em>\nwhich has the functionality to sync log files to <em>AWS CloudWatch Logs</em>.\nFollow this guide to enable this with Sitecore log files:</p>\n<h4 id=\"1-update-log4net-configuration-optional\"><a href=\"#1-update-log4net-configuration-optional\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>1. Update <em>log4net</em> Configuration</strong> (Optional)</h4>\n<p><em>This step is only required if you need to keep the log\tfiles on the server in a format which the Sitecore Log Analyzer can parse.</em></p>\n<p><em>CloudWatch Logs</em> identifies a new log entry by a time stamp, to satisfy this you must change the thread parameter (usually <em>%4t</em>) to be a fixed number so that both <em>CloudWatch Logs</em> can identify a new log entry and <em>Sitecore Log Analyzer</em> can parse successfully. See line 6 where this has been changed to <em>9999</em>:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #81A1C1\">&lt;log4net&gt;</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;appender</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">LogFileAppender</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">log4net.Appender.SitecoreLogFileAppender, Sitecore.Logging</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;file</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">$(dataFolder)/logs/log.{date}.txt</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">/&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;appendToFile</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">true</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">/&gt;</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">&lt;layout</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">log4net.Layout.PatternLayout</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #81A1C1\">&gt;</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #81A1C1\">&lt;conversionPattern</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">9999 %d{ABSOLUTE} %-5p %m%n</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">/&gt;</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #81A1C1\">&lt;/layout&gt;</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;encoding</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">value</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">utf-8</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">/&gt;</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;/appender&gt;</span>\n<span style=\"color: #81A1C1\">&lt;/log4net&gt;</span></code></pre>\n<h4 id=\"2-update-json-cloudwatch-logs-configuration\"><a href=\"#2-update-json-cloudwatch-logs-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>2. Update JSON CloudWatch Logs configuration</strong></h4>\n<p>The <em>CloudWatch Logs</em> configuration file is located on the server in directory <code>C:\\Program Files\\Amazon\\Ec2ConfigService\\Settings\\AWS.EC2.Windows.CloudWatch.json</code>. The AWS guide to <strong><em><a href=\"http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/UsingConfig_WinAMI.html#send_logs_to_cwl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Configuring a Windows Instance Using the EC2Config Service</a></em></strong>\thas a good introduction on how to set up pushing different types of logs to <em>CloudWatch Logs</em>, however the following\texample should be a good guide to getting started with Sitecore log files:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">schemaVersion</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">1.0</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Sitecore Logs CloudWatch</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">runtimeConfig</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">aws:cloudWatch</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">properties</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">EngineConfiguration</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">PollInterval</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">00:00:15</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Components</span><span style=\"color: #ECEFF4\">\":[</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Id</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">SitecoreLogs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">FullName</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">AWS.EC2.Windows.CloudWatch.CustomLog.CustomLogInputComponent,AWS.EC2.Windows.CloudWatch</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Parameters</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">LogDirectoryPath</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">C:</span><span style=\"color: #EBCB8B\">\\\\</span><span style=\"color: #A3BE8C\">inetpub</span><span style=\"color: #EBCB8B\">\\\\</span><span style=\"color: #A3BE8C\">www.contoso.com</span><span style=\"color: #EBCB8B\">\\\\</span><span style=\"color: #A3BE8C\">Data</span><span style=\"color: #EBCB8B\">\\\\</span><span style=\"color: #A3BE8C\">logs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">TimestampFormat</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">9999 HH:mm:ss</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Encoding</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">UTF-8</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Filter</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">log*.txt</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">CultureName</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">en-GB</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">TimeZoneKind</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Local</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">LineCount</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Id</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">CloudWatchLogs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">FullName</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">AWS.EC2.Windows.CloudWatch.CloudWatchLogsOutput,AWS.EC2.Windows.CloudWatch</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Parameters</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">AccessKey</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">SecretKey</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Region</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">eu-west-1</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">LogGroup</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">sitecore-logs</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">                </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">LogStream</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">{instance_id}</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">],</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Flows</span><span style=\"color: #ECEFF4\">\":{</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Flows</span><span style=\"color: #ECEFF4\">\":[</span><span style=\"color: #D8DEE9FF\"> </span>\n<span style=\"color: #D8DEE9FF\">              </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">SitecoreLogs, CloudWatchLogs</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">            </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<p>Notes:</p>\n<ul>\n<li>Line 15: Matches 9999 which was defined in step 1 (if you skipped this step replace with <em>HH:mm:ss</em>)</li>\n<li>Line 27/28: The AccessKey/SecretKey has been left empty as this will come from the EC2 instance's IAM role (see step 3)</li>\n<li>Line 31: The log stream will be automatically called the same name as the EC2 instance ID</li>\n</ul>\n<h4 id=\"3-iam-settings\"><a href=\"#3-iam-settings\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>3. IAM settings</strong></h4>\n<p>The configuration above has no values set for the <em>AccessKey</em> and\n<em>SecretKey</em>. This is because the EC2 instance's <em>IAM Role</em>\nhas been set up to allow writing to <em>CloudWatch Logs</em>. If this hasn't been done,\nthen an <em>AccessKey</em> and <em>SecretKey</em> with these permissions\nis required. The following is an example of the <em>IAM policy</em> that is required:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Statement</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Resource</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">*</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Action</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">logs:PutLogEvents</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">logs:Create*</span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #ECEFF4\">,</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">logs:Describe*</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">],</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #8FBCBB\">Effect</span><span style=\"color: #ECEFF4\">\":</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">Allow</span><span style=\"color: #ECEFF4\">\"</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">]</span>\n<span style=\"color: #ECEFF4\">}</span></code></pre>\n<h4 id=\"4-enable-cloudwatch-logs\"><a href=\"#4-enable-cloudwatch-logs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>4. Enable CloudWatch logs</strong></h4>\n<p>The final step is to enable <em>CloudWatch Logs</em>. To do this, open the <em>EC2ConfigService</em>\nSettings and ensure the <code>Enable CloudWatch Logs integration</code> checkbox is checked:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 488 596' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ed4f42f92bcaedc18e8824fced8c8dcb'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ed4f42f92bcaedc18e8824fced8c8dcb)' width='488' height='596' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABOAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAgQDBQYBAAf/xAA6EAACAQMDAgIHBQUJAAAAAAABAgMABBEFEiETMUFRBhQiU2FxkhUzQpHRFjJDgbIlUlRigqHB4fD/xAAZAQADAQEBAAAAAAAAAAAAAAAAAgMEAQX/xAArEQABAwAIBQQDAAAAAAAAAAAAAQIDBBETFCEyUXEFEkFh0SNCobElUmL/2gAMAwEAAhEDEQA/APr66DD6vDJLeOnUQOMQlh2HHHzoX0aySdoH1PEyjJj6XtY%2bWa2OliU6Na9GR4yApO1QcjaOOarxqZYSZvWyONoFuTnPj7XwrVeZWKrWrgee3h9He1HObjuvkzDaVps0Mm3WPZXG5kjwUz28eKO09Era8QyW2tXTpwMqeM1soNat%2bim8dQgHc5kgHw5w/GaMazbttIgLZHcSwkfD8fjXL3Nr9DJw2jJ7flfJkT6DKTxq92B5A8UxH6IKiKv2gzYGMsoJPzOa07azahsdNSecjqw8YGefar0Gr28z7I4N0hXKxiWEs3yAb5/lRe5f2%2bgXhtGX2/K%2bTFat6Ji3s7i5S6nuGRCRBEgy58lycZNZ1PQy2mvXuZVv4pViNwWcDYD%2b8U44zkV9qhAkiV2iMTHujBcj8sikfSFQuk3OAPu28P8AKaRZXSqiPxx0QqyBlGa50NbVVOir5INM632LbervsbCZPT35G0cYyKgttYihDi6DOzSYQiJEz4Y/eOSDwTU%2bmNKmi2xgkjjbaoJdCwPsjyIorbU7YK5nkjIDcFIHHzzkd81N%2bZS0WRNiNNbs2YqtvKXHJQImQc47Zrx13T1ZVVSzN2ChCT5fi8fCmhqthuwJOTn%2bC3h/KutqNkgySwwcfcP%2blKOJya9p8bEMjA4PgnhxjvTQvlLjGn3mfBuiOOPn/wCzRfaNkGwSQcZ%2b4ftn5edFHqlrI6qkj7mOAOk4/wCKABXUWZWPqN8MZ7xjn/eltWuDcaLdsYZ4sIwxKu0n2T8aKb0i0yGfoy3QSXjCspBOe1FrUqz6HcSRklSjdxjwNMzMhOXI7YWsr31LRbRhGHLKowW2/hFJpcWKhm%2bybIOowoSRec8%2bQxTdoitolqzWkl1tVTsjKgj2Rz7RAoQLQrkadLg5yOpFnj/XWClX21dY8vL3rrLQWdm3mrrqJ1l0Y4YQW3BBBEa8HsKbGrWpOBLk%2bQpeC1sZYlaSEQsx%2b7kdc5/kSKNbPTc5TpZPORIM1n/I/wAfJX0e5aKSwBHY813moVuIgoAkjx2HtiiSdHbajxs3kGBr1U7kBQy6dnBa1z5cVBrZjOiXBh29PY2NvbsaKbQNMmlEstjE8gx7RJzx25odciWHRbhI12qEbAznwNMzMhOXI7Yi0zotpFnHNP0S2wriTaWIC8fEeYqu%2bzIGyV1CxC5Px5PnlufGrjQYo5NKtTIisVVSu4Zwdo7U81pbNndbwnccnKDmh%2bZTsWRNjMnS4SV/tGyL8bdxzx5jnvxXE0yLph49Q08qe8nGceODngGtP6nbDGLeHjt7A4rvqlvjHQix5bBSjlBBZwwe293pkg35JlQMB8va4P8A1UkSJBIZIZdEjmA/eSHBBPfkNV0bS2IINvDg%2bGwV31W3P8CL6BQAvb30QQ%2bsXdoz7jgxsAMeXJPNRekJzpFyR26bf0mnPU7b/Dw/QKT9IuNIuMf3G/pNMzMhOXI7ZTmgSIulW4Z1U7F7nH4RVj1oveJ9QrF2XpHaQ2cETRTlkRVJAGOB86m/aez91cfkP1qjoncy4Eo6RHyJj0Nd1oveJ9Qr3Wi94n1Csj%2b09n7q4/IfrUdx6RWc0RTp3K5IOQq/rS2T9B7xHqbLrRe8T6hXutF7xPqFYCPVLJHkbfetvOcMqkL8ueKC41CxmkD9bUI/gm0A8%2bPNFk/QLxHqau%2b1d3eS2sA0dwp4kmt2aNgO%2bCCO/hzSt3cXU2jXovmhLhTt6aFONp8yaoptVspIige9jyCNyKgI5zxzQDVbSOyliV7uV2iZA0irkkjuSDVWsdWiI0nJPGrFx6H/2Q==' /%3e%3c/svg%3e\" width=\"488\" alt=\"Enable CloudWatch Logs integration\" data-srcset=\"/assets/static/EnableCloudWatchLogs.1f39e70.50bce58cd229a166c664ea7ee132f1f9.jpg 488w\" data-sizes=\"(max-width: 488px) 100vw, 488px\" data-src=\"/assets/static/EnableCloudWatchLogs.1f39e70.50bce58cd229a166c664ea7ee132f1f9.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/EnableCloudWatchLogs.1f39e70.50bce58cd229a166c664ea7ee132f1f9.jpg\" width=\"488\" alt=\"Enable CloudWatch Logs integration\"></noscript></p>\n<h4 id=\"5-check-results\"><a href=\"#5-check-results\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>5. Check results</strong></h4>\n<p>The easiest way to check that everything is working is to log into the AWS\nConsole and navigate to <em>CloudWatch Logs</em>. Here you should see a new\n<em>Log Group</em> has been created called <code>sitecore-logs</code> and within it you'll see\n<em>Log Streams</em> containing log entries:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 539 88' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ee9b642c15f6c1a54964e8cf88b17976'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ee9b642c15f6c1a54964e8cf88b17976)' width='539' height='88' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAKAEADASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAgUAAwQI/8QAJxAAAgEEAQIFBQAAAAAAAAAAAQIDAAQRIRIFEyMxQVFxUlNhgZH/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAwDAQACEQMRAD8A6DZZbOYTW9tPMznjgzjiN70x9Kst7q7knSN7GRFIJ591W/WBs087ET4DRIwGwCoODQmCFJVZIo1ZQcEKAR5VUyi6w8ZsY7MlWrJcKoAgOvda2ZqZqSS3d1eRThUsWdWweXcVd79D8UC3PUiRnpUgGM5Ein4p28Ucq%2bJGj4%2bpQaLy0NCmYCm1kvJIyZ7J4HBxx5Bs/nIq/wAf7L/yt%2bamaC//2Q==' /%3e%3c/svg%3e\" width=\"539\" alt=\"CloudWatch Logs Log Group\" data-srcset=\"/assets/static/LogGroup.8e3589d.9ca6abd424113b2ca07b0e18f1878927.jpg 539w\" data-sizes=\"(max-width: 539px) 100vw, 539px\" data-src=\"/assets/static/LogGroup.8e3589d.9ca6abd424113b2ca07b0e18f1878927.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/LogGroup.8e3589d.9ca6abd424113b2ca07b0e18f1878927.jpg\" width=\"539\" alt=\"CloudWatch Logs Log Group\"></noscript></p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 496 86' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-829c2a6a70cb3f3e2df25a3acc3400fd'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-829c2a6a70cb3f3e2df25a3acc3400fd)' width='496' height='86' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAALAEADASIAAhEBAxEB/8QAGQAAAwADAAAAAAAAAAAAAAAAAgQFAwYI/8QALBAAAgIBAgQEBQUAAAAAAAAAAQIDEQAEEgUTIWEiMkFRFDFTcYFjk6HR4f/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFREBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhEDEQA/AOg2cQztqeZxBhZBhViym/XbWCeNq5UjScT2sAQV05r/AD85f5atDKp3UXN%2bI4r8DB%2br%2b6/95ZJUtsLR6nmRI1zrYun8LDsRWZF1O193iPYmxlWFQkSKt0BQs3h5FS21m4VsUdwKxPUcSEBUGDUybvpRFq%2b/tmwYpqoElnUvutV6UxHr2wIg41akjQ8QsCyDAR7fLr1PX%2bDjcGt50QflzR3Y2yIVYfjG300dDz%2bYjzt7/fCh00SMhUNanpbk%2bp74H//Z' /%3e%3c/svg%3e\" width=\"496\" alt=\"CloudWatch Logs Log Stream\" data-srcset=\"/assets/static/LogStream.cbd5838.61f3fbde994aca85e31f20d773f3cf21.jpg 496w\" data-sizes=\"(max-width: 496px) 100vw, 496px\" data-src=\"/assets/static/LogStream.cbd5838.61f3fbde994aca85e31f20d773f3cf21.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/LogStream.cbd5838.61f3fbde994aca85e31f20d773f3cf21.jpg\" width=\"496\" alt=\"CloudWatch Logs Log Stream\"></noscript></p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 619 94' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-519691eaf3b970577e61bc65ba0a84d3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-519691eaf3b970577e61bc65ba0a84d3)' width='619' height='94' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAKAEADASIAAhEBAxEB/8QAGwAAAQQDAAAAAAAAAAAAAAAABQADBAYBAgf/xAAvEAACAQMABQoHAAAAAAAAAAABAgMABBEFEhMhMRQiM0FCUVNhYpIjMlKRobHR/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAwDAQACEQMRAD8A7nFYRaudkxOCOk8x6qkWweFUhiBEY1sDWB7/AFUGguZzCczSdrtHvFaR3M/KLcbaXBZweed/zVaRcbaBpIEZ1kLEb8NQ7Sdgr3YbZSE4UMdfgOd6h%2bvv1StFMzaPgLMSSu8k0M0vNKl/KqSOqhIzgMR1v/KVIkWkL2yiOOKQR62d5B4nv1qfi23NaVWIwcoCM%2bW/NBRcTZ6aT3GkbibxpPcaUg9JLqqpW2ncniBIoI/NPKIyoJEikjgW4VWjcT5HxpOP1Gs8om8aT3GlI//Z' /%3e%3c/svg%3e\" width=\"619\" alt=\"CloudWatch Logs Log Entries\" data-srcset=\"/assets/static/LogEntries.179003c.5124d89b18a9081753cdce883bb973e8.jpg 619w\" data-sizes=\"(max-width: 619px) 100vw, 619px\" data-src=\"/assets/static/LogEntries.179003c.5124d89b18a9081753cdce883bb973e8.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/LogEntries.179003c.5124d89b18a9081753cdce883bb973e8.jpg\" width=\"619\" alt=\"CloudWatch Logs Log Entries\"></noscript></p>\n<p>If it doesn't look like it's working, then check the EC2Config Service log file (<code>C:\\Program Files\\Amazon\\Ec2ConfigService\\Logs\\Ec2ConfigLog.txt</code>) to see if there are any errors with your setup.</p>\n<h4 id=\"analysing-sitecore-logs-stored-in-aws-cloudwatch-logs\"><a href=\"#analysing-sitecore-logs-stored-in-aws-cloudwatch-logs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Analysing Sitecore Logs stored in AWS CloudWatch Logs</h4>\n<p>The next article describes how to <a href=\"/analyse-sitecore-logs-in-aws-cloudwatch-logs\">Analyse Sitecore Logs stored in AWS CloudWatch Logs</a>.</p>\n","tags":[{"title":"aws","path":"/tag/aws/"},{"title":"sitecore","path":"/tag/sitecore/"}],"references":["http://martinfowler.com/bliki/BlueGreenDeployment.html|Blue/Green Deployment - Martin Fowler","https://aws.amazon.com/about-aws/whats-new/2014/07/10/introducing-amazon-cloudwatch-logs/|Amazon CloudWatch Logs","https://marketplace.sitecore.net/Modules/S/Sitecore_Log_Analyzer.aspx|Sitecore Log Analyzer"],"path":"/sync-sitecore-logs-to-cloudwatch-logs/"}},"context":{}}